<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Formaci√≥n Policial - 8n8 & Jules</title>
    <style>
        :root {
            --primary: #003366;
            --secondary: #0055a5;
            --accent: #eebb00;
            --light: #f4f7f6;
            --success: #28a745;
            --danger: #dc3545;
        }
        
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--light); margin: 0; color: #333; }
        
        /* CABECERA */
        header { background: var(--primary); color: white; padding: 20px; text-align: center; }
        .search-container { position: sticky; top: 0; background: var(--primary); padding: 10px 20px; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        input#search { width: 100%; max-width: 800px; padding: 12px; border-radius: 20px; border: none; font-size: 16px; display: block; margin: 0 auto; }

        /* CONTENEDOR */
        .container { max-width: 1000px; margin: 20px auto; padding: 0 15px; }

        /* TARJETA PRINCIPAL */
        .card { background: white; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; border-left: 5px solid var(--secondary); }
        
        /* CABECERA DE LA TARJETA */
        .card-header { padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: white; }
        .card-header:hover { background: #f9f9f9; }
        .card-title h3 { margin: 0; color: var(--primary); }
        .card-meta { font-size: 0.8em; color: #666; margin-top: 5px; }
        .icon-toggle { font-weight: bold; font-size: 1.5em; color: var(--secondary); transition: 0.3s; }
        .card.active .icon-toggle { transform: rotate(180deg); }

        /* CUERPO DE LA TARJETA (PESTA√ëAS) */
        .card-body { display: none; border-top: 1px solid #eee; }
        .card.active .card-body { display: block; }

        /* NAVEGACI√ìN DE PESTA√ëAS */
        .tabs { display: flex; background: #eee; }
        .tab-btn { flex: 1; padding: 12px; border: none; background: #eee; cursor: pointer; border-bottom: 3px solid transparent; font-weight: bold; color: #555; }
        .tab-btn:hover { background: #ddd; }
        .tab-btn.active { background: white; border-bottom: 3px solid var(--secondary); color: var(--primary); }

        /* CONTENIDO DE LAS PESTA√ëAS */
        .tab-content { padding: 25px; display: none; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- ESTILOS ESPEC√çFICOS PARA LAS HERRAMIENTAS --- */

        /* 1. TARJETAS DE MEMORIA (FLASHCARDS) */
        .flashcard-container { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }
        .flashcard { 
            width: 250px; height: 180px; perspective: 1000px; cursor: pointer; 
        }
        .flashcard-inner {
            position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 10px;
        }
        .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 15px; box-sizing: border-box; font-size: 0.9em;
        }
        .flashcard-front { background-color: var(--primary); color: white; font-weight: bold; }
        .flashcard-back { background-color: #fff; color: #333; transform: rotateY(180deg); border: 2px solid var(--primary); }

        /* 2. TEST INTERACTIVO */
        .quiz-item { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .question { font-weight: bold; margin-bottom: 10px; display: block; }
        .options label { display: block; padding: 8px; margin: 5px 0; background: #f9f9f9; border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .options label:hover { background: #e9ecef; }
        .feedback { margin-top: 10px; font-weight: bold; padding: 5px; border-radius: 4px; display: none; }
        .feedback.correct { color: var(--success); background: #d4edda; }
        .feedback.incorrect { color: var(--danger); background: #f8d7da; }

        /* 3. MULTIMEDIA */
        audio { width: 100%; margin-top: 10px; }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

    </style>
</head>
<body>

<header>
    <h1>üìö 8n8 Academy: Repositorio Policial</h1>
    <p>Documentaci√≥n, Test y Audio-Res√∫menes | Uso Interno</p>
</header>

<div class="search-container">
    <input type="text" id="search" onkeyup="filtrar()" placeholder="üîç Buscar norma, concepto, pregunta de test...">
</div>

<div class="container" id="listaNormas">

    <div class="card">
        <div class="card-header" onclick="toggleCard(this)">
            <div class="card-title">
                <h3>üöÅ PNT Operaciones con Drones (UAS)</h3>
                <div class="card-meta">Reglamento de Ejecuci√≥n (UE) 2019/947 | Seguridad A√©rea</div>
            </div>
            <span class="icon-toggle">‚ñº</span>
        </div>
        
        <div class="card-body">
            <div class="tabs">
                <button class="tab-btn active" onclick="openTab(event, 'doc-drones')">üìÑ Norma</button>
                <button class="tab-btn" onclick="openTab(event, 'study-drones')">üß† Estudio</button>
                <button class="tab-btn" onclick="openTab(event, 'quiz-drones')">‚úÖ Test</button>
                <button class="tab-btn" onclick="openTab(event, 'media-drones')">üéß Audio</button>
            </div>

            <div id="doc-drones" class="tab-content active">
                <h4>Marco Legal y Competencias</h4>
                <p>El uso de sistemas de aeronaves no tripuladas (UAS) por parte de la Polic√≠a Local se enmarca en las "actividades no EASA" (polic√≠a, aduanas, etc.), bajo la supervisi√≥n de <strong>AESA</strong> seg√∫n el Real Decreto 517/2024.</p>
                <h4>Requisitos Operativos</h4>
                <ul>
                    <li>Registro de Operador en AESA.</li>
                    <li>Seguro de Responsabilidad Civil espec√≠fico.</li>
                    <li>Pilotos con formaci√≥n STS-ES.</li>
                    <li>Manual de Operaciones actualizado.</li>
                </ul>
            </div>

            <div id="study-drones" class="tab-content">
                <div class="flashcard-container">
                    <div class="flashcard" onclick="this.classList.toggle('flipped')">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">¬øQui√©n es la autoridad competente para UAS policiales?</div>
                            <div class="flashcard-back">AESA (Agencia Estatal de Seguridad A√©rea).</div>
                        </div>
                    </div>
                    <div class="flashcard" onclick="this.classList.toggle('flipped')">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">¬øQu√© seguro es obligatorio?</div>
                            <div class="flashcard-back">Responsabilidad Civil espec√≠fica de aviaci√≥n.</div>
                        </div>
                    </div>
                    <div class="flashcard" onclick="this.classList.toggle('flipped')">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">¬øSe puede volar sobre aglomeraciones?</div>
                            <div class="flashcard-back">Solo si se dispone de medidas de mitigaci√≥n y autorizaci√≥n espec√≠fica (SORA).</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="quiz-drones" class="tab-content">
                <div class="quiz-item">
                    <span class="question">1. ¬øQu√© normativa regula el r√©gimen jur√≠dico civil de los UAS en Espa√±a?</span>
                    <div class="options">
                        <label onclick="checkAnswer(this, false)">a) La Constituci√≥n Espa√±ola.</label>
                        <label onclick="checkAnswer(this, true)">b) El Real Decreto 517/2024.</label>
                        <label onclick="checkAnswer(this, false)">c) El C√≥digo Penal.</label>
                    </div>
                    <div class="feedback"></div>
                </div>
                <div class="quiz-item">
                    <span class="question">2. ¬øEs necesario registrarse como operador?</span>
                    <div class="options">
                        <label onclick="checkAnswer(this, true)">a) S√≠, es obligatorio en AESA.</label>
                        <label onclick="checkAnswer(this, false)">b) No, solo para drones de m√°s de 25kg.</label>
                    </div>
                    <div class="feedback"></div>
                </div>
            </div>

            <div id="media-drones" class="tab-content">
                <h4>Resumen de Audio (NotebookLM)</h4>
                <p>Escucha el resumen ejecutivo generado por la IA sobre la normativa de drones.</p>
                <audio controls>
                    <source src="nombre-archivo-drones.mp3" type="audio/mpeg">
                    Tu navegador no soporta el elemento de audio.
                </audio>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header" onclick="toggleCard(this)">
            <div class="card-title">
                <h3>üíú Protocolo Violencia de G√©nero (VioG√©n)</h3>
                <div class="card-meta">Ley Org√°nica 1/2004 | Protecci√≥n de V√≠ctimas</div>
            </div>
            <span class="icon-toggle">‚ñº</span>
        </div>
        
        <div class="card-body">
            <div class="tabs">
                <button class="tab-btn active" onclick="openTab(event, 'doc-viogen')">üìÑ Norma</button>
                <button class="tab-btn" onclick="openTab(event, 'study-viogen')">üß† Estudio</button>
                <button class="tab-btn" onclick="openTab(event, 'quiz-viogen')">‚úÖ Test</button>
                <button class="tab-btn" onclick="openTab(event, 'media-viogen')">üéß Audio</button>
            </div>

            <div id="doc-viogen" class="tab-content active">
                <p><em>[PEGA AQU√ç EL TEXTO DE LA NORMA DESDE NOTEBOOKLM]</em></p>
            </div>

            <div id="study-viogen" class="tab-content">
                <div class="flashcard-container">
                    <div class="flashcard" onclick="this.classList.toggle('flipped')">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">PREGUNTA TARJETA 1</div>
                            <div class="flashcard-back">RESPUESTA TARJETA 1</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="quiz-viogen" class="tab-content">
                <div class="quiz-item">
                    <span class="question">1. Escribe aqu√≠ la pregunta...</span>
                    <div class="options">
                        <label onclick="checkAnswer(this, false)">a) Respuesta incorrecta</label>
                        <label onclick="checkAnswer(this, true)">b) Respuesta CORRECTA</label>
                        <label onclick="checkAnswer(this, false)">c) Respuesta incorrecta</label>
                    </div>
                    <div class="feedback"></div>
                </div>
            </div>

            <div id="media-viogen" class="tab-content">
                <audio controls>
                    <source src="audio-viogen.mp3" type="audio/mpeg">
                </audio>
            </div>
        </div>
    </div>

</div>

<script>
    // 1. FUNCI√ìN PARA ABRIR/CERRAR TARJETAS
    function toggleCard(header) {
        header.parentElement.classList.toggle('active');
    }

    // 2. FUNCI√ìN PARA CAMBIAR DE PESTA√ëA
    function openTab(evt, tabName) {
        // Buscar la tarjeta padre actual para no afectar a otras
        var cardBody = evt.currentTarget.closest('.card-body');
        
        // Ocultar todos los contenidos de esta tarjeta
        var tabContents = cardBody.getElementsByClassName("tab-content");
        for (var i = 0; i < tabContents.length; i++) {
            tabContents[i].style.display = "none";
            tabContents[i].classList.remove("active");
        }

        // Desactivar todos los botones de esta tarjeta
        var tabLinks = cardBody.getElementsByClassName("tab-btn");
        for (var i = 0; i < tabLinks.length; i++) {
            tabLinks[i].className = tabLinks[i].className.replace(" active", "");
        }

        // Mostrar el actual
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.className += " active";
    }

    // 3. FUNCI√ìN DEL BUSCADOR
    function filtrar() {
        var input = document.getElementById('search');
        var filter = input.value.toUpperCase();
        var lista = document.getElementById("listaNormas");
        var cards = lista.getElementsByClassName('card');

        for (var i = 0; i < cards.length; i++) {
            var text = cards[i].innerText;
            if (text.toUpperCase().indexOf(filter) > -1) {
                cards[i].style.display = "";
            } else {
                cards[i].style.display = "none";
            }
        }
    }

    // 4. L√ìGICA DEL TEST (CORREGIR)
    function checkAnswer(option, isCorrect) {
        var feedback = option.parentElement.nextElementSibling;
        
        // Reseteamos colores
        var options = option.parentElement.getElementsByTagName('label');
        for(var i=0; i<options.length; i++) {
            options[i].style.background = "#f9f9f9";
            options[i].style.color = "#333";
        }

        if (isCorrect) {
            option.style.background = "#d4edda";
            option.style.color = "#155724";
            feedback.innerText = "¬°Correcto! ‚úÖ";
            feedback.className = "feedback correct";
        } else {
            option.style.background = "#f8d7da";
            option.style.color = "#721c24";
            feedback.innerText = "Incorrecto ‚ùå. Int√©ntalo de nuevo.";
            feedback.className = "feedback incorrect";
        }
        feedback.style.display = "block";
    }
</script>

</body>
</html>
