<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Normativa y Procedimientos - Polic√≠a Local</title>
    <style>
        :root {
            --primary: #003366; /* Azul Institucional */
            --secondary: #0055a5;
            --accent: #eebb00; /* Toque de color alerta/destacado */
            --bg: #f4f7f6;
            --text: #333;
        }
        
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 0; line-height: 1.6; }
        
        /* CABECERA */
        header { background-color: var(--primary); color: white; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        header h1 { margin: 0; font-size: 1.8rem; text-transform: uppercase; letter-spacing: 1px; }
        header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.9; }

        /* CONTENEDOR PRINCIPAL */
        .container { max-width: 1000px; margin: 30px auto; padding: 0 20px; }

        /* BARRA DE B√öSQUEDA */
        .search-box { position: sticky; top: 20px; z-index: 100; margin-bottom: 30px; }
        .search-box input {
            width: 100%; padding: 15px 20px; font-size: 16px; border: none; border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: 0.3s;
        }
        .search-box input:focus { outline: none; box-shadow: 0 6px 20px rgba(0,51,102,0.3); transform: scale(1.01); }

        /* TARJETAS DE NORMAS */
        .norma-card { 
            background: white; border-radius: 8px; margin-bottom: 20px; overflow: hidden; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: 0.3s; border-left: 5px solid var(--secondary);
        }
        .norma-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        /* CABECERA DE LA TARJETA (T√çTULO) */
        .norma-header { 
            padding: 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; 
            background: white;
        }
        .norma-header h2 { margin: 0; font-size: 1.2rem; color: var(--primary); }
        .norma-meta { font-size: 0.85rem; color: #666; margin-top: 5px; }
        .tags { display: flex; gap: 5px; margin-top: 5px; }
        .tag { background: #eef2f5; color: #555; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
        .tag.blue { background: #e3f2fd; color: #1565c0; }
        .tag.red { background: #ffebee; color: #c62828; }
        .tag.green { background: #e8f5e9; color: #2e7d32; }

        /* CONTENIDO DESPLEGABLE */
        .norma-content { 
            display: none; padding: 0 20px 20px; border-top: 1px solid #eee; background-color: #fafafa; 
        }
        .norma-content h3 { color: var(--secondary); border-bottom: 2px solid #ddd; padding-bottom: 5px; margin-top: 20px; }
        .norma-content ul { padding-left: 20px; }
        .norma-content li { margin-bottom: 8px; }
        .norma-content strong { color: #000; }

        /* ICONO DESPLEGAR */
        .arrow { font-size: 1.2rem; transition: 0.3s; color: var(--secondary); }
        .norma-card.active .arrow { transform: rotate(180deg); }
        .norma-card.active .norma-content { display: block; animation: fadeIn 0.3s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* FOOTER */
        footer { text-align: center; margin-top: 50px; padding: 20px; font-size: 0.8rem; color: #888; border-top: 1px solid #ddd; }
    </style>
</head>
<body>

<header>
    <h1>Repositorio de Procedimientos</h1>
    <p>Polic√≠a Local - Ayuntamiento | Uso Interno</p>
</header>

<div class="container">
    
    <div class="search-box">
        <input type="text" id="searchInput" onkeyup="filtrar()" placeholder="üîç Buscar procedimiento, palabra clave o categor√≠a...">
    </div>

    <div id="listaNormas">

        <div class="norma-card">
            <div class="norma-header" onclick="toggleCard(this)">
                <div>
                    <h2>PNT Operaciones con Drones (UAS)</h2>
                    <div class="norma-meta">Procedimiento Normalizado de Trabajo | Seguridad A√©rea</div>
                    <div class="tags">
                        <span class="tag blue">TECNOLOG√çA</span>
                        <span class="tag red">OPERATIVO</span>
                    </div>
                </div>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="norma-content">
                <h3>I. Marco Legal y Competencias</h3>
                <p>El uso de UAS (drones) por la Polic√≠a Local se enmarca en las "actividades o servicios no EASA" (polic√≠a, aduanas, etc.), excluidas del reglamento base europeo. La autoridad competente es <strong>AESA</strong>.</p>
                <ul>
                    <li><strong>Real Decreto 517/2024:</strong> Regula el r√©gimen jur√≠dico civil aplicable.</li>
                    <li><strong>Responsabilidad:</strong> El Ayuntamiento es el operador responsable de garantizar la seguridad y el cumplimiento normativo.</li>
                </ul>

                <h3>II. Requisitos para Operar</h3>
                <p>Para volar drones como Polic√≠a Local es obligatorio:</p>
                <ol>
                    <li><strong>Registro de Operador:</strong> Estar registrado en AESA.</li>
                    <li><strong>Seguro:</strong> P√≥liza de responsabilidad civil espec√≠fica para aviaci√≥n.</li>
                    <li><strong>Pilotos:</strong> Deben tener la formaci√≥n te√≥rica y pr√°ctica (STS o espec√≠fica).</li>
                    <li><strong>Manual de Operaciones:</strong> Documento aprobado internamente que defina c√≥mo se vuela.</li>
                </ol>

                <h3>III. Procedimiento de Vuelo (Paso a Paso)</h3>
                <p><strong>Fase Previa:</strong> Verificar zona en ENAIRE Drones (zonas restringidas, CTR, zonas ZEPA). Solicitar permisos si es necesario.</p>
                <p><strong>Durante el Vuelo:</strong></p>
                <ul>
                    <li>Mantener l√≠nea de vista (VLOS) salvo autorizaci√≥n BVLOS.</li>
                    <li>No sobrevolar aglomeraciones de personas sin medidas de mitigaci√≥n.</li>
                    <li>Respetar la privacidad (Ley Protecci√≥n de Datos).</li>
                </ul>
            </div>
        </div>

        <div class="norma-card">
            <div class="norma-header" onclick="toggleCard(this)">
                <div>
                    <h2>C√≥digo de Tr√°fico y Seguridad Vial</h2>
                    <div class="norma-meta">Ley de Seguridad Vial | Reglamento General de Circulaci√≥n</div>
                    <div class="tags">
                        <span class="tag green">TR√ÅFICO</span>
                        <span class="tag blue">SANCIONES</span>
                    </div>
                </div>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="norma-content">
                <p><em>[Aqu√≠ pegar√°s el resumen del C√≥digo de Tr√°fico]</em></p>
                <ul>
                    <li>Procedimientos sancionadores de tr√°fico.</li>
                    <li>Regulaci√≥n de veh√≠culos de movilidad personal (VMP).</li>
                    <li>Actuaci√≥n en accidentes de tr√°fico y atestados.</li>
                </ul>
            </div>
        </div>

        <div class="norma-card">
            <div class="norma-header" onclick="toggleCard(this)">
                <div>
                    <h2>Protocolo Violencia de G√©nero y Dom√©stica</h2>
                    <div class="norma-meta">Protecci√≥n de V√≠ctimas | VioG√©n</div>
                    <div class="tags">
                        <span class="tag red">URGENTE</span>
                        <span class="tag blue">JUDICIAL</span>
                    </div>
                </div>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="norma-content">
                <h3>Actuaci√≥n Policial</h3>
                <p>Protocolo de actuaci√≥n ante avisos de violencia de g√©nero. Valoraci√≥n del riesgo policial.</p>
                <ul>
                    <li>Medidas de protecci√≥n y alejamiento.</li>
                    <li>Coordinaci√≥n con Guardia Civil / Polic√≠a Nacional.</li>
                    <li>Atenci√≥n y acompa√±amiento a la v√≠ctima.</li>
                </ul>
            </div>
        </div>

        <div class="norma-card">
            <div class="norma-header" onclick="toggleCard(this)">
                <div>
                    <h2>Legislaci√≥n de Menores</h2>
                    <div class="norma-meta">Protecci√≥n del Menor | Responsabilidad Penal</div>
                    <div class="tags">
                        <span class="tag green">ASISTENCIAL</span>
                        <span class="tag blue">PENAL</span>
                    </div>
                </div>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="norma-content">
                <p>Procedimientos relacionados con la Ley Org√°nica de Responsabilidad Penal de los Menores.</p>
                <ul>
                    <li>Actuaci√≥n con menores infractores.</li>
                    <li>Situaciones de desamparo o riesgo.</li>
                    <li>Absentismo escolar.</li>
                </ul>
            </div>
        </div>

    </div>
</div>

<footer>
    <p>Repositorio generado con Asistencia IA (Gemini & n8n) para DTIC Municipal.</p>
    <p>¬© 2024 Ayuntamiento</p>
</footer>

<script>
    function toggleCard(header) {
        // Cierra los dem√°s (opcional, si quieres efecto acorde√≥n estricto)
        // var allCards = document.querySelectorAll('.norma-card');
        // allCards.forEach(c => { if(c !== header.parentElement) c.classList.remove('active'); });

        // Abre o cierra el actual
        var card = header.parentElement;
        card.classList.toggle('active');
    }

    function filtrar() {
        var input = document.getElementById('searchInput');
        var filter = input.value.toUpperCase();
        var lista = document.getElementById("listaNormas");
        var tarjetas = lista.getElementsByClassName('norma-card');

        for (var i = 0; i < tarjetas.length; i++) {
            var textoTitulo = tarjetas[i].querySelector('h2').innerText;
            var textoTags = tarjetas[i].querySelector('.tags').innerText;
            var textoContenido = tarjetas[i].querySelector('.norma-content').innerText;
            
            var textoCompleto = textoTitulo + " " + textoTags + " " + textoContenido;

            if (textoCompleto.toUpperCase().indexOf(filter) > -1) {
                tarjetas[i].style.display = "";
            } else {
                tarjetas[i].style.display = "none";
            }
        }
    }
</script>

</body>
</html>
